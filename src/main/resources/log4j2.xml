<?xml version="1.0" encoding="UTF-8"?>
<Configuration status="info">
	<!-- 로컬 설정 파일 -->
	<Properties>
        <!-- 에러 로그 파일이름 -->
		<Property name="ERR_LOG_FILE_NAME">err_log</Property>
        <!-- 로그 패턴 -->
		<Property name="LOG_PATTERN">%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level [%logger{0}:%line] - %msg %n</Property>

		<Property name="LOG_LEVEL">info</Property>
		<Property name="LOG_PATH">./logs</Property>
		<Property name="LOG_FILE_NAME">GBAVL_MS</Property>

	</Properties>

	<Appenders>
		<!-- 콘솔 로그 출력 -->
		<Console name="CONSOLE" target="SYSTEM_OUT">
			<!-- 출력 패턴 설정 -->
		    <PatternLayout pattern="${LOG_PATTERN}" />
		</Console>

		<!-- 로깅 파일 설정 -->
		<!-- .gz,.zip 등을 넣으면 자동 일자별 로그파일 압축?? - log4j에선 됨 -->
        <RollingFile name="FILE" fileName="${LOG_PATH}/${LOG_FILE_NAME}.log"
                     filePattern="${LOG_PATH}/${LOG_FILE_NAME}.%d{yyyy-MM-dd}_%i.log">

			<!-- 파일 로그 패턴 -->
            <PatternLayout pattern="${LOG_PATTERN}" />

			<!-- 시간 및 사이즈 지정 -->
            <Policies>
                <TimeBasedTriggeringPolicy />

				<!-- 파일당 최고 용량 kb, mb, gb -->
                <SizeBasedTriggeringPolicy size="10 MB"/>
            </Policies>

			<!-- 최대 파일 저장 일수 설정 -->
			<!-- 일자별 로그파일 최대 보관주기(~일), 해당 설정일 이상된 파일은 자동으로 제거-->
			<!-- 파일 분리시 %i값이 최대 30을 넘지 않도록 -->
			<DefaultRolloverStrategy max="30" fileIndex="max">
				<Delete basePath="logs" maxDepth="1">
					<IfFileName glob="*.log"/>
					<IfLastModified age="30d"/>
				</Delete>
			</DefaultRolloverStrategy>
        </RollingFile>

	</Appenders>



	<Loggers>
		<!-- 스프링 프레임워크에서 찍는건 level을 info로 설정 -->
<!--		<logger name="org.springframework" level="${LOG_LEVEL}" additivity="false" >-->
<!--			<AppenderRef ref="CONSOLE" />-->
<!--		</logger>-->
<!--		<Logger name="jdbc.connection" level="info" additivity="false">-->
<!--			<AppenderRef ref="console" />-->
<!--		</Logger>-->
<!--		<Logger name="jdbc.audit" level="error" additivity="false">-->
<!--			<AppenderRef ref="console" />-->
<!--		</Logger>-->
<!--		<Logger name="jdbc.resultset" level="error" additivity="false">-->
<!--			<AppenderRef ref="console" />-->
<!--		</Logger>-->
<!--		<Logger name="jdbc.resultsettable" level="error" additivity="false">-->
<!--			<AppenderRef ref="console" />-->
<!--		</Logger>-->

<!--		<Logger name="jdbc.sqltiming" level="error" additivity="false">-->
<!--			<AppenderRef ref="console" />-->
<!--		</Logger>-->
<!--		<Logger name="com.ibatis" level="error" additivity="false">-->
<!--			<AppenderRef ref="console" />-->
<!--		</Logger>-->
<!--		<Logger name="java.sql" level="error" additivity="false">-->
<!--			<AppenderRef ref="console" />-->
<!--		</Logger>-->
<!--		<Logger name="com.kpmg.kr" level="error" additivity="false">-->
<!--			<AppenderRef ref="console" />-->
<!--		</Logger>-->


		<Root level="${LOG_LEVEL}">
			<AppenderRef ref="CONSOLE" />
			<AppenderRef ref="FILE" />
		</Root>
	</Loggers>

</Configuration>